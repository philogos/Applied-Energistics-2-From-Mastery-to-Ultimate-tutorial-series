---
description: >-
  任务的完成，不仅需要「包」中的原料，也需要对原料有相应控制。在大部分任务处理中，运用「指示物」或者简单的红石控制就能完成任务的控制。但是如果是有相对的严格时序要求的，根据任务状态来开始或继续的任务，就需要更加复杂的任务控制系统来进行控制。
---

# 2.5 任务控制系统

## 「控制」的定义

任务在实现过程中，除了发配原料「包」外的，所需的其他操作。比如对原料的输入控制、产品的输出控制、选择下一步操作的子网等。

## 「控制」的实现

控制的前置流程：1、用ME接口发起任务，将任务发的包送至处理网络。2、处理网络根据包中信息选择对应的 控制系统（可省略）。

### 第一种控制

一种最常规的控制方式：在完成1、2后。3、控制系统获得**开始任务**的信息，开始「控制」任务推进。4、在完成时，控制系统获得**完成任务**的信息，将控制系统重置成**初始系统**。控制系统循环重复流程34，就能控制任务实现自动化。

这种控制方式的经典实现就是样板带标记物的符文祭坛，[https://www.bilibili.com/video/BV1ab4y1R7t2/](https://www.bilibili.com/video/BV1ab4y1R7t2/)，卡位用的标记物等同于3、 **开始任务**的信息，祭坛完成合成后的红石信号等同于4、 **完成任务**的信息。

这种处理方式的变型可以是符文祭坛的[目前最简单的标记物实现](../4-实例/4.1-植物魔法符文祭坛.md#\_toc137910926-1)，那个把3、4的实现合并成一个实现，简化了控制流程缩小了体积。

### 第二种控制

和**第一种控制**一样，在完成1、2后。控制系统获得**开始任务**的信息。但是，**第二种控制**不获取**完成任务**的信息，他通过自己的时钟周期进行循环，来完成自动化。

具体来说，**第二种控制系统**3、尝试获得**开始任务**的信息，4、如果有开始任务的信息，将这个信息**锁存**，开始循环时钟周期。5、在结束循环时解锁该信息，并重新试图执行3。

这样的设计的控制系统功能强大。可以很方便的实现各种延时控制，容易配置，泛用性广。

#### 实现：

<figure><img src="../.gitbook/assets/image (1).png" alt=""><figcaption><p>时钟控制</p></figcaption></figure>

在无任务时，漏斗和箱子组成的时钟被锁定。开始任务，ME接口发出一份原料，发信器发送**开始任务的信息，**解锁漏斗，循环开始，箱子右边的发信器发出信号，**锁存信息**。当时钟循环即将完成，将**锁存信息解锁，**读取**开始任务的信息。**至此完成一个循环。

时钟网络中的其他发信器根据时钟中的物品数量，在不同的时间间隔后发出红石信号。

在类似[倒序装填](../3-常用进阶实现/3.4-倒序装填.md)那种需要很多红石信号的控制系统中能用上。
