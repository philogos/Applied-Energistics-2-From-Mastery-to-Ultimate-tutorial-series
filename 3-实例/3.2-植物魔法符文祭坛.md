---
description: 这是一个非常经典且典型的设计问题，融合了「卡合成」、红石时序控制，空间优化处理等等。主要难点在于发配单份物品和收集产物。
---

# 3.2 植物魔法 符文祭坛

## 设计说明 <a href="#_toc137910926" id="_toc137910926"></a>

符文祭坛合成时，没有储存总线的反馈，所以需要卡合成。处理顺序是：一份产物给祭坛-->祭坛处理完成-->收集产物-->下一份产物。因为有严格的先后次序，所以需要时序控制。为了方便扩展且美观，应该做空间优化处理。

## 设计实现 <a href="#_toc137910926" id="_toc137910926"></a>

发配单份物品可以选用[「卡合成」](../2-xiang-guan-de-gai-nian-yu-shi-xian/2.5-ka-he-cheng.md#\_toc137910917)的各类实现。收集产物可以用漏斗花或扇水仙完成，所需红石信号来自祭坛处理完成发出的红石信号。解除卡合成状态，进入下一次循环，发配单份物品。

<figure><img src="../.gitbook/assets/image (13).png" alt=""><figcaption><p>实现1</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (9).png" alt=""><figcaption><p>实现1 续</p></figcaption></figure>

采用的是[图2.12](../2-xiang-guan-de-gai-nian-yu-shi-xian/2.5-ka-he-cheng.md#\_toc137910917)的设计思路，产物沿着ME接口-箱子-ME管道（粉）-花格箱的顺序传输发配。后面箱子中有「标记物」，当下面箱子内容物超过2个时，将「标记物」传输进下面箱子，当合成完成时，将下面箱子的「标记物」传输到后面箱子。依此完成循环。

花药台旁边的发射器放森林法杖，后边的扇水仙吹物品到漏斗，收集产物。

这套流程的问题在于，ME输入输出总线在红石激活下的行为难以理解（奇怪的代码），对这部分的深刻解释需要看代码的具体实现。所以只能是一个近似解。当然，很少出问题。右下角的小土包底下是粘性活塞，用来发出1tick信号

<figure><img src="../.gitbook/assets/image (11).png" alt=""><figcaption><p>实现2</p></figcaption></figure>

用[图2.14](../2-xiang-guan-de-gai-nian-yu-shi-xian/2.5-ka-he-cheng.md#\_toc137910917)的设计思路，打包机打包。开始合成时，ME-IO中的储存元件在靠右的ME-IO中，这个ME-IO上接的输入总线有红石卡。右边的ME接口发送物品到箱子，先有红石信号让ME-IO中的储存元件空转一圈，转完一圈后得到箱子里的一份物品，再接红石信号，此时开始正式合成。每次合成完都会给输入总线一个信号让其继续发包，如此持续到循环结束。

稳定性比实现1强。

<figure><img src="../.gitbook/assets/image (6).png" alt=""><figcaption><p>花30分钟优化后的实现2</p></figcaption></figure>

有含有「标记物」的实现，在视频有 ，比这些理论上都更稳定，体积更小。

{% embed url="https://www.bilibili.com/video/BV1ab4y1R7t2/" %}
啦啦啦
{% endembed %}
